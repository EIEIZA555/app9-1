{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phollakritw\\\\OneDrive - kmutnb.ac.th\\\\\\u0E2A\\u0E32\\u0E02\\u0E32\\u0E04\\u0E2D\\u0E21\\u0E1E\\u0E34\\u0E27\\u0E40\\u0E15\\u0E2D\\u0E23\\u0E4C\\\\Selected Topics in Computer\\\\react\\\\app9-1\\\\local\\\\src\\\\db-delete.js\",\n  _s = $RefreshSig$();\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React from 'react';\nimport './table-style.css';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DBUpdate() {\n  _s();\n  let [data, setData] = React.useState('');\n  const form = React.useRef();\n  React.useEffect(() => {\n    fetch('/api/db/read').then(response => response.json()).then(result => {\n      if (result.length > 0) {\n        showData(result);\n      } else {\n        setData( /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n        }, void 0, false));\n      }\n    }).catch(err => alert(err));\n  }, []);\n  const showData = result => {\n    let r = /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmitForm,\n      ref: form,\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E25\\u0E1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            class: \"thLeft\",\n            children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E23\\u0E32\\u0E04\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 58\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E34\\u0E19\\u0E04\\u0E49\\u0E32\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            class: \"thLeft\",\n            children: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 9\n        }, this), result.map(doc => {\n          let dt = new Date(Date.parse(doc.date_added));\n          let dmy = /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [dt.getDate(), \"-\", dt.getMonth() + 1, \"-\", dt.getFullYear()]\n          }, void 0, true);\n          let p = new Intl.NumberFormat().format(doc.price);\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"tdCenter\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"_id\",\n                value: doc._id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"tdCenter\",\n              children: p\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              class: \"tdCenter\",\n              children: dmy\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: doc.detail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"\\u0E25\\u0E1A\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }, this);\n    setData(r);\n  };\n  const onSubmitForm = event => {\n    event.preventDefault();\n    const fd = new FormData(form.current);\n    const fe = Object.fromEntries(fd.entries());\n    if (Object.keys(fe).length === 0) {\n      alert('ต้องเลือกรายการที่จะลบ');\n      return;\n    }\n    if (!window.confirm('ยืนยันการลบรายการนี้')) {\n      return;\n    }\n    fetch('/api/db/delete', {\n      method: 'POST',\n      body: JSON.stringify(fe),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(result => {\n      if (result.error) {\n        alert(result.error);\n      } else {\n        if (result.length === 0) {\n          setData('ไม่มีรายการข้อมูล');\n        } else {\n          showData(result);\n        }\n        alert('ข้อมูลถูกลบแล้ว');\n      }\n    }).catch(err => alert(err));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      margin: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"data\",\n      children: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/db\",\n      children: \"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2B\\u0E25\\u0E31\\u0E01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 9\n  }, this);\n}\n_s(DBUpdate, \"NSbrlBXSxJlcBMD1gKH11/arHeI=\");\n_c = DBUpdate;\nvar _c;\n$RefreshReg$(_c, \"DBUpdate\");","map":{"version":3,"names":["React","DBUpdate","data","setData","useState","form","useRef","useEffect","fetch","then","response","json","result","length","showData","catch","err","alert","r","onSubmitForm","map","doc","dt","Date","parse","date_added","dmy","getDate","getMonth","getFullYear","p","Intl","NumberFormat","format","price","_id","name","detail","event","preventDefault","fd","FormData","current","fe","Object","fromEntries","entries","keys","window","confirm","method","body","JSON","stringify","headers","error","margin"],"sources":["C:/Users/phollakritw/OneDrive - kmutnb.ac.th/สาขาคอมพิวเตอร์/Selected Topics in Computer/react/app9-1/local/src/db-delete.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React from 'react'\r\nimport './table-style.css'\r\n\r\nexport default function DBUpdate() {\r\n    let [data, setData] = React.useState('')\r\n\tconst form = React.useRef()\r\n\r\n    React.useEffect(() => {\t\r\n\t\tfetch('/api/db/read')\r\n\t\t.then(response => response.json())\r\n\t\t.then(result => {       \r\n            if (result.length > 0) {\r\n                showData(result)\r\n            } else {\r\n                setData(<>ไม่มีรายการข้อมูล</>)\r\n            }   \r\n\t\t})\r\n        .catch(err => alert(err))\r\n    }, [])  \r\n\r\n    const showData = (result) => {\r\n        let r = (\r\n        <form onSubmit={onSubmitForm} ref={form}>\r\n        <table>\r\n        <tr>\r\n            <th>ลบ</th><th class=\"thLeft\">ชื่อสินค้า</th><th>ราคา</th>\r\n            <th>วันที่เพิ่มสินค้า</th><th class=\"thLeft\">รายละเอียด</th>\r\n        </tr>\r\n        {\r\n        result.map(doc => {\r\n            let dt = new Date(Date.parse(doc.date_added))\r\n            let dmy = (\r\n                <>{dt.getDate()}-{dt.getMonth()+1}-{dt.getFullYear()}</>\r\n            )\r\n            let p = new Intl.NumberFormat().format(doc.price)\r\n            return (\r\n            <tr>\r\n                <td class=\"tdCenter\">\r\n                    <input type=\"radio\" name=\"_id\" value={doc._id}/>\r\n                </td>\r\n                <td>{doc.name}</td>\r\n                <td class=\"tdCenter\">{p}</td>\r\n                <td class=\"tdCenter\">{dmy}</td>\r\n                <td>{doc.detail}</td>\r\n            </tr>\r\n            )\r\n        })\r\n        }\r\n        </table>\r\n        <br/>\r\n        <button>ลบรายการที่เลือก</button>\r\n        </form>\r\n        )\r\n    \r\n        setData(r)\r\n    }\r\n\r\n    const onSubmitForm = (event) => {\r\n        event.preventDefault()\r\n\r\n        const fd = new FormData(form.current)\r\n        const fe = Object.fromEntries(fd.entries())\r\n        if (Object.keys(fe).length === 0) {\r\n            alert('ต้องเลือกรายการที่จะลบ')\r\n            return\r\n        }\r\n\r\n        if (!window.confirm('ยืนยันการลบรายการนี้')) {\r\n            return\r\n        }\r\n\r\n        fetch('/api/db/delete', {\r\n            method: 'POST',\r\n            body: JSON.stringify(fe),\r\n            headers: {'Content-Type':'application/json'}\r\n        })\r\n        .then(response => response.json())\r\n        .then(result => {\r\n            if (result.error) {\r\n                alert(result.error)\r\n            } else {\r\n                if (result.length === 0) {\r\n                    setData('ไม่มีรายการข้อมูล')\r\n                } else {\r\n                    showData(result)                  \r\n                }\r\n                alert('ข้อมูลถูกลบแล้ว')   \r\n            }\r\n        })\r\n        .catch(err => alert(err))\r\n    }\r\n\r\n    return (\r\n        <div style={{margin:'20px'}}>\r\n            <div id=\"data\">{data}</div>\r\n            <br/>\r\n            <a href=\"/db\">หน้าหลัก</a>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}